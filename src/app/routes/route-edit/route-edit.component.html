<div class="container content">
  <div class="row">
    <div class="col-md-12">
      <h2>Edit Route {{route.name}}</h2>
      <a class="btn btn-secondary" routerLink="/routes">Return to Routes</a>
      <form 
        id="route-edit" 
        #f="ngForm" 
        (ngSubmit)="onSubmit(f)"
        class="form-control">
        <div class="row">
          <div class="col-md-6 form-group">
            <h4>Route Details</h4>
            <label for="name">Route Name: </label>
            <input
              required
              [ngModel]="route.name"
              #name="ngModel" 
              type="text" 
              name="name" 
              id="name"
              class="form-control required"> 
              <label for="quadrant">Route Quadrant: </label>
              <input
                required
                [ngModel]="route.quadrant"
                #quadrant="ngModel"
                type="text" 
                name="quadrant"
                id="quadrant"
                class="form-control required">
              <label for="status">Route Status: </label>
              <select
                required
                [ngModel]="route.status"
                #status="ngModel"
                name="status" 
                id="status"
                class="form-select">
                <option value="true">On Time</option>
                <option value="false">Late</option>
              </select>
          </div>
          <div class="col-md-6 form-group">
            <h4>Route Stops</h4>
            <button class="btn btn-primary" (click)="onAddStop()">Add New Stop</button>
              <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0"
                *ngFor="let stop of route.stops">
                <ngb-panel>
                  <ng-template ngbPanelTitle >
                    <h5>Stop: {{stop.stopId}}</h5>
                  </ng-template>
                  <ng-template ngbPanelContent>
                    <ul class="list-group list-group-flush form-control">
                      <li class="list-group-item">
                        <label for="stopTime">Stop Time: </label>
                        <input
                          [ngModel]="stop.stopTime"
                          #stopTime="ngModel"
                          [disabled]="stopSave" 
                          type="text" 
                          name="stopTime" 
                          id="stopTime"
                          class="form-control">
                      </li>
                      <li class="list-group-item">
                        <label for="stopLocation">Stop Location: </label>
                        <input
                          [ngModel]="stop.location"
                          #stopLocation="ngModel"
                          [disabled]="stopSave" 
                          type="text" 
                          name="stopLocation" 
                          id="stopLocation"
                          class="form-control">
                      </li>
                      <li class="list-group-item">
                        <label for="averageRiders">Average Riders: </label>
                        <input
                          [ngModel]="stop.averageRiders"
                          #averageRiders="ngModel"
                          [disabled]="stopSave" 
                          type="text" 
                          name="averageRiders" 
                          id="averageRiders"
                          class="form-control">
                      </li>
                    </ul>
                    <div class="btn-group">
                      <button 
                        type="button" 
                        class="btn btn-info"
                        (click)="onSaveStop(stop.stopId)">Save</button>
                      <button 
                        type="button" 
                        class="btn btn-warning"
                        (click)="onEditStop()">Edit</button>
                      <button 
                        type="button" 
                        class="btn btn-danger"
                        (click)="onDeleteStop(stop.stopId)">Delete</button>
                    </div>
                  </ng-template>
                </ngb-panel>
              </ngb-accordion>
          </div>
        </div>
        <div class="btn-group">
          <button
            (click)="onCancel()" 
            type="button" 
            class="btn btn-warning"
            >Cancel</button>
          <button 
            type="submit" 
            class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>



